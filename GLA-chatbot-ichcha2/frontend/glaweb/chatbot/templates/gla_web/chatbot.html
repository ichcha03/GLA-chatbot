<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GLA University Chatbot - AI Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-green: #006400;
        --light-green: #dbffe0;
        --lighter-green: #f9fdf9;
        --bg-gradient: linear-gradient(135deg, #e6ffe6 0%, #f2fff5 100%);
        --text-primary: #1a3e1a;
        --text-secondary: #333;
        --text-light: #666;
        --white: #ffffff;
        --shadow: 0 8px 32px rgba(0, 100, 0, 0.15);
        --shadow-hover: 0 12px 40px rgba(0, 100, 0, 0.2);
        --border-radius: 20px;
        --transition: all 0.3s ease;
      }

      body {
        font-family: "Inter", "Segoe UI", sans-serif;
        background: var(--bg-gradient);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        overflow-x: hidden;
      }

      .chat-container {
        width: 100%;
        max-width: 900px;
        height: 80vh;
        max-height: 700px;
        background: var(--white);
        border-radius: 24px;
        border: 2px solid var(--primary-green);
        box-shadow: var(--shadow);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;
        animation: slideUp 0.8s ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .chat-header {
        background: var(--primary-green);
        padding: 24px 32px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        overflow: hidden;
      }

      .chat-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        opacity: 0.3;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 20px;
        z-index: 2;
      }

      .logo {
        width: 80px;
        height: 80px;
        border-radius: 16px;
        object-fit: contain;
        border: 3px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        background: var(--white);
        padding: 6px;
      }

      .header-title {
        display: flex;
        flex-direction: column;
      }

      .header-title h1 {
        font-size: 24px;
        font-weight: 700;
        color: var(--white);
        margin-bottom: 4px;
        letter-spacing: -0.5px;
      }

      .header-title .subtitle {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.8);
        font-weight: 400;
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        z-index: 2;
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #00ff88;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .status-text {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
      }

      .chat-box {
        flex: 1;
        overflow-y: auto;
        padding: 32px;
        background: var(--lighter-green);
        background-image: url("frontend/glaweb/chatbot/static/gla-web/image/gla-logo.jpg"),
          radial-gradient(
            circle at 10% 20%,
            rgba(0, 100, 0, 0.05) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 90% 80%,
            rgba(0, 100, 0, 0.03) 0%,
            transparent 50%
          );
        background-repeat: no-repeat;
        background-position: center;
        background-size: 120px, cover, cover;
        background-blend-mode: overlay;
        opacity: 0.95;
        display: flex;
        flex-direction: column;
        gap: 20px;
        position: relative;
      }

      .chat-box::-webkit-scrollbar {
        width: 6px;
      }

      .chat-box::-webkit-scrollbar-track {
        background: transparent;
      }

      .chat-box::-webkit-scrollbar-thumb {
        background: rgba(0, 100, 0, 0.2);
        border-radius: 3px;
      }

      .chat-box::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 100, 0, 0.3);
      }

      .welcome-message {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-light);
        animation: fadeIn 1s ease-out 0.5s both;
      }

      .welcome-message i {
        font-size: 48px;
        margin-bottom: 16px;
        color: var(--primary-green);
      }

      .welcome-message h3 {
        font-size: 20px;
        margin-bottom: 8px;
        color: var(--text-primary);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .chat-bubble {
        max-width: 75%;
        padding: 16px 20px;
        border-radius: 20px;
        font-size: 15px;
        line-height: 1.6;
        position: relative;
        animation: messageSlide 0.4s ease-out;
        word-wrap: break-word;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      @keyframes messageSlide {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .chat-bubble.user {
        align-self: flex-end;
        background: var(--light-green);
        color: var(--text-primary);
        border-bottom-right-radius: 8px;
      }

      .chat-bubble.bot {
        align-self: flex-start;
        background: var(--white);
        color: var(--text-secondary);
        border-bottom-left-radius: 8px;
        border: 1px solid rgba(0, 100, 0, 0.1);
      }

      .typing-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 16px 20px;
        background: var(--white);
        border-radius: 20px;
        border-bottom-left-radius: 8px;
        max-width: 70%;
        border: 1px solid rgba(0, 100, 0, 0.1);
        animation: messageSlide 0.4s ease-out;
      }

      .typing-dots {
        display: flex;
        gap: 4px;
      }

      .typing-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--primary-green);
        animation: typing 1.4s infinite;
      }

      .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
      }
      .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes typing {
        0%,
        60%,
        100% {
          transform: translateY(0);
          opacity: 0.4;
        }
        30% {
          transform: translateY(-10px);
          opacity: 1;
        }
      }

      .chat-input {
        padding: 24px 32px;
        background: var(--white);
        border-top: 1px solid rgba(0, 100, 0, 0.1);
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .input-wrapper {
        flex: 1;
        position: relative;
      }

      .chat-input input {
        width: 100%;
        padding: 16px 20px;
        background: var(--lighter-green);
        border: 1px solid rgba(0, 100, 0, 0.2);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 15px;
        outline: none;
        transition: var(--transition);
        font-family: inherit;
      }

      .chat-input input:focus {
        border-color: var(--primary-green);
        box-shadow: 0 0 0 3px rgba(0, 100, 0, 0.1);
      }

      .chat-input input::placeholder {
        color: var(--text-light);
      }

      .voice-button {
        padding: 16px;
        background: var(--lighter-green);
        color: var(--primary-green);
        border: 1px solid rgba(0, 100, 0, 0.2);
        border-radius: 12px;
        cursor: pointer;
        font-size: 18px;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 52px;
        height: 52px;
      }

      .voice-button:hover {
        background: var(--primary-green);
        color: var(--white);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 100, 0, 0.3);
      }

      .voice-button.recording {
        background: #ff4444;
        color: var(--white);
        animation: recordingPulse 1s infinite;
      }

      @keyframes recordingPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .send-button {
        padding: 16px 20px;
        background: var(--primary-green);
        color: var(--white);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: 15px;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 4px 12px rgba(0, 100, 0, 0.3);
      }

      .send-button:hover {
        background: #0a7c0a;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 100, 0, 0.4);
      }

      .send-button:active {
        transform: translateY(0);
      }

      .send-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .quick-actions {
        display: flex;
        gap: 8px;
        margin-top: 16px;
        flex-wrap: wrap;
      }

      .quick-action {
        padding: 8px 16px;
        background: var(--white);
        border: 1px solid rgba(0, 100, 0, 0.2);
        border-radius: 20px;
        color: var(--text-light);
        font-size: 14px;
        cursor: pointer;
        transition: var(--transition);
      }

      .quick-action:hover {
        background: var(--primary-green);
        color: var(--white);
        transform: translateY(-1px);
      }

      .message-time {
        font-size: 12px;
        color: var(--text-light);
        margin-top: 4px;
        opacity: 0.7;
      }

      .voice-status {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.8);
        color: var(--white);
        padding: 20px;
        border-radius: 12px;
        display: none;
        text-align: center;
        z-index: 1000;
      }

      .voice-status.show {
        display: block;
        animation: fadeIn 0.3s ease-out;
      }

      @media (max-width: 768px) {
        .chat-container {
          height: 90vh;
          margin: 10px;
          border-radius: 16px;
        }

        .chat-header {
          padding: 20px;
        }

        .header-title h1 {
          font-size: 20px;
        }

        .logo {
          width: 65px;
          height: 65px;
          border-width: 2px;
        }

        .chat-box {
          padding: 20px;
        }

        .chat-bubble {
          max-width: 85%;
        }

        .chat-input {
          padding: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="chat-container">
      <div class="chat-header">
        <div class="header-left">
          <img
            src="../static/gla_web/image/gla-logo.jpg"
            alt="GLA University Logo"
            class="logo"
          />
          <div class="header-title">
            <h1>GLA University Assistant</h1>
            <div class="subtitle">AI-powered university support</div>
          </div>
        </div>
        <div class="status-indicator">
          <div class="status-dot"></div>
          <span class="status-text">Online</span>
        </div>
      </div>

      <div class="chat-box" id="chat-box">
        <div class="welcome-message">
          <i class="fas fa-robot"></i>
          <h3>Welcome to GLA University Assistant!</h3>
          <p>
            I'm here to help you with any questions about GLA University. Ask me
            about fees, placements, hostels, or anything else!
          </p>
          <div class="quick-actions">
            <div
              class="quick-action"
              onclick="sendQuickMessage('What are the fees for B.Tech?')"
            >
              💰 Fees Information
            </div>
            <div
              class="quick-action"
              onclick="sendQuickMessage('Tell me about placements')"
            >
              🎯 Placement Details
            </div>
            <div
              class="quick-action"
              onclick="sendQuickMessage('Hostel facilities and fees')"
            >
              🏠 Hostel Info
            </div>
            <div
              class="quick-action"
              onclick="sendQuickMessage('Academic programs available')"
            >
              📚 Programs
            </div>
          </div>
        </div>
      </div>

      <div class="chat-input">
        <div class="input-wrapper">
          <input
            type="text"
            id="user-input"
            placeholder="Type your message or use voice input..."
            onkeypress="handleKeyPress(event)"
          />
        </div>
        <button
          class="voice-button"
          onclick="toggleVoiceInput()"
          id="voice-btn"
        >
          <i class="fas fa-microphone"></i>
        </button>
        <button class="send-button" onclick="sendMessage()" id="send-btn">
          <i class="fas fa-paper-plane"></i>
          Send
        </button>
      </div>

      <div class="voice-status" id="voice-status">
        <i class="fas fa-microphone fa-2x"></i>
        <p id="voice-status-text">Listening...</p>
      </div>
    </div>

    <script>
      let messageCount = 0;
      let isRecording = false;
      let recognition = null;

      // Initialize speech recognition
      if (
        "webkitSpeechRecognition" in window ||
        "SpeechRecognition" in window
      ) {
        const SpeechRecognition =
          window.SpeechRecognition || window.webkitSpeechRecognition;
        recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = "en-US";

        recognition.onstart = function () {
          isRecording = true;
          const voiceBtn = document.getElementById("voice-btn");
          const voiceStatus = document.getElementById("voice-status");
          voiceBtn.classList.add("recording");
          voiceBtn.innerHTML = '<i class="fas fa-stop"></i>';
          voiceStatus.classList.add("show");
          document.getElementById("voice-status-text").textContent =
            "Listening...";
        };

        recognition.onresult = function (event) {
          const transcript = event.results[0][0].transcript;
          document.getElementById("user-input").value = transcript;
          document.getElementById("voice-status-text").textContent =
            "Processing...";
          setTimeout(() => {
            sendMessage();
          }, 500);
        };

        recognition.onerror = function (event) {
          console.error("Speech recognition error:", event.error);
          document.getElementById("voice-status-text").textContent =
            "Error occurred. Please try again.";
          setTimeout(stopVoiceInput, 2000);
        };

        recognition.onend = function () {
          stopVoiceInput();
        };
      }

      function toggleVoiceInput() {
        if (!recognition) {
          alert(
            "Speech recognition is not supported in your browser. Please try Chrome or Safari."
          );
          return;
        }

        if (isRecording) {
          recognition.stop();
        } else {
          recognition.start();
        }
      }

      function stopVoiceInput() {
        isRecording = false;
        const voiceBtn = document.getElementById("voice-btn");
        const voiceStatus = document.getElementById("voice-status");
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
        voiceStatus.classList.remove("show");
      }

      function handleKeyPress(event) {
        if (event.key === "Enter") {
          sendMessage();
        }
      }

      function sendQuickMessage(message) {
        const inputField = document.getElementById("user-input");
        inputField.value = message;
        sendMessage();
      }

      function sendMessage() {
        const inputField = document.getElementById("user-input");
        const userMessage = inputField.value.trim();
        if (!userMessage) return;

        const chatBox = document.getElementById("chat-box");
        const sendBtn = document.getElementById("send-btn");

        // Remove welcome message if it exists
        const welcomeMessage = chatBox.querySelector(".welcome-message");
        if (welcomeMessage) {
          welcomeMessage.style.animation = "fadeOut 0.3s ease-out forwards";
          setTimeout(() => welcomeMessage.remove(), 300);
        }

        // Disable send button temporarily
        sendBtn.disabled = true;

        // Add user's message
        const userBubble = document.createElement("div");
        userBubble.className = "chat-bubble user";
        userBubble.innerHTML = `
                ${userMessage}
                <div class="message-time">${getCurrentTime()}</div>
            `;
        chatBox.appendChild(userBubble);
        inputField.value = "";

        // Scroll to bottom
        chatBox.scrollTop = chatBox.scrollHeight;

        // Show typing indicator
        const typingIndicator = document.createElement("div");
        typingIndicator.className = "typing-indicator";
        typingIndicator.innerHTML = `
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
                <span style="color: var(--text-light); font-size: 14px;">Assistant is typing...</span>
            `;
        chatBox.appendChild(typingIndicator);
        chatBox.scrollTop = chatBox.scrollHeight;

        // Simulate bot response with realistic delay
        setTimeout(() => {
          typingIndicator.remove();

          const botBubble = document.createElement("div");
          botBubble.className = "chat-bubble bot";
          const response = getFakeAnswer(userMessage);
          botBubble.innerHTML = `
                    ${response}
                    <div class="message-time">${getCurrentTime()}</div>
                `;
          chatBox.appendChild(botBubble);
          chatBox.scrollTop = chatBox.scrollHeight;

          // Re-enable send button
          sendBtn.disabled = false;
        }, 1500 + Math.random() * 1000);
      }

      function getCurrentTime() {
        const now = new Date();
        return now.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });
      }

      function getFakeAnswer(question) {
        question = question.toLowerCase();

        if (question.includes("fees") || question.includes("fee")) {
          return `
                    <strong>💰 GLA University Fees Structure:</strong><br><br>
                    <strong>B.Tech Programs:</strong> ₹1,50,000 per year<br>
                    <strong>M.Tech Programs:</strong> ₹1,25,000 per year<br>
                    <strong>MBA:</strong> ₹2,00,000 per year<br><br>
                    <em>Note: Fees may vary by specialization. Scholarships are available for eligible students.</em>
                `;
        } else if (question.includes("placement") || question.includes("job")) {
          return `
                    <strong>🎯 Placement Highlights:</strong><br><br>
                    <strong>Top Recruiters:</strong> Wipro, TCS, Infosys, HCL, Cognizant<br>
                    <strong>Average Package:</strong> ₹4.5 LPA<br>
                    <strong>Highest Package:</strong> ₹12 LPA<br>
                    <strong>Placement Rate:</strong> 85%+<br><br>
                    <em>Our dedicated placement cell ensures excellent career opportunities for students.</em>
                `;
        } else if (
          question.includes("hostel") ||
          question.includes("accommodation")
        ) {
          return `
                    <strong>🏠 Hostel Information:</strong><br><br>
                    <strong>Hostel Fee:</strong> ₹85,000 per year (including mess)<br>
                    <strong>Facilities:</strong> AC/Non-AC rooms, WiFi, Laundry, Sports<br>
                    <strong>Mess:</strong> Nutritious vegetarian meals<br>
                    <strong>Security:</strong> 24/7 security with CCTV surveillance<br><br>
                    <em>Separate hostels for boys and girls with modern amenities.</em>
                `;
        } else if (
          question.includes("program") ||
          question.includes("course") ||
          question.includes("degree")
        ) {
          return `
                    <strong>📚 Academic Programs:</strong><br><br>
                    <strong>Engineering:</strong> CSE, IT, ECE, ME, CE, EE<br>
                    <strong>Management:</strong> MBA, BBA<br>
                    <strong>Applications:</strong> MCA, BCA<br>
                    <strong>Sciences:</strong> B.Sc, M.Sc in various streams<br><br>
                    <em>All programs are designed with industry-relevant curriculum and practical exposure.</em>
                `;
        } else if (
          question.includes("admission") ||
          question.includes("eligibility")
        ) {
          return `
                    <strong>🎓 Admission Process:</strong><br><br>
                    <strong>Application:</strong> Online application through university website<br>
                    <strong>Entrance:</strong> Based on JEE Main/UPSEE for B.Tech<br>
                    <strong>Documents:</strong> 12th marksheet, entrance scores<br>
                    <strong>Counselling:</strong> Merit-based seat allocation<br><br>
                    <em>Visit our admissions office for detailed guidance and support.</em>
                `;
        } else if (
          question.includes("contact") ||
          question.includes("address")
        ) {
          return `
                    <strong>📞 Contact Information:</strong><br><br>
                    <strong>Address:</strong> 17 Km Stone, NH-2, Mathura-Delhi Road, Mathura, UP<br>
                    <strong>Phone:</strong> +91-565-2765000<br>
                    <strong>Email:</strong> info@gla.ac.in<br>
                    <strong>Website:</strong> www.gla.ac.in<br><br>
                    <em>We're always here to help you with your queries!</em>
                `;
        } else {
          const responses = [
            "I'm here to help you with any questions about GLA University! Feel free to ask about fees, placements, hostels, or academic programs.",
            "That's an interesting question! Let me help you with information about GLA University. What specific aspect would you like to know more about?",
            "I'd be happy to assist you! You can ask me about admissions, courses, facilities, or any other aspect of GLA University.",
            "Great question! I'm your dedicated GLA University assistant. I can provide information about fees, placements, hostels, and much more!",
          ];
          return responses[Math.floor(Math.random() * responses.length)];
        }
      }

      // Add CSS for fadeOut animation
      const style = document.createElement("style");
      style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-20px); }
            }
        `;
      document.head.appendChild(style);
    </script>
  </body>
</html>